(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/hot/hot"],{"0832":function(t,e,i){"use strict";var n=i("d482"),o=i.n(n);o.a},"8cb5":function(t,e,i){"use strict";i.r(e);var n=i("f250"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"94b5":function(t,e,i){"use strict";i("9e4e");var n=a(i("b0ce")),o=a(i("f588"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},b570:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"index"},[t._l(t.list,function(e,n){return i("block",{key:n},[i("view",{staticClass:"card"},[e.text?i("view",{staticClass:"car-title-view"},[i("rich-text",{attrs:{nodes:e.text,mpcomid:"512e99d8-0-"+n}})],1):t._e(),e.img?i("image",{staticClass:"card-img",attrs:{src:e.img,mode:"widthFix",eventid:"512e99d8-0-"+n},on:{click:function(i){t.previmg(e.img)}}}):t._e(),e.video?i("video",{attrs:{src:e.video,controls:""}}):t._e(),i("view",{staticClass:"iconbottom"},[i("view",{staticClass:"iconfont icon-appreciate_light",class:e.type&&"like"==e.type?"active":"",attrs:{eventid:"512e99d8-1-"+n},on:{click:function(i){t.setlike("like",n,e.id)}}},[i("text",[t._v(t._s(e.like))])]),i("view",{staticClass:"icon-oppose_light iconfont",class:e.type&&"hate"==e.type?"active":"",attrs:{eventid:"512e99d8-2-"+n},on:{click:function(i){t.setlike("hate",n,e.id)}}},[i("text",[t._v(t._s(e.hate))])]),i("view",{staticClass:"icon-pinglun iconfont",attrs:{eventid:"512e99d8-3-"+n},on:{click:function(i){t.showreply(e.id,n)}}},[i("text",[t._v(t._s(e.replycount?e.replycount:0))])])])])])}),t.loading?i("text",{staticClass:"loadMore"},[t._v("加载中...")]):t._e(),t.showlogin?i("button",{attrs:{"open-type":"getUserInfo",id:"showlogin",type:"warn",eventid:"512e99d8-4"},on:{getuserinfo:t.login}},[t._v("使用微信登录")]):t._e(),t.showlogin?i("view",{attrs:{id:"mask",eventid:"512e99d8-5"},on:{click:function(e){t.showlogin=!1}}}):t._e()],2)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},d482:function(t,e,i){},f250:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("2f62");var n=o(i("bc1b"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,e}var a={data:function(){return{refreshing:!1,providerList:[],list:[],openid:"",userinfo:"",token:"",fetchPageNum:1,loading:!0,showlogin:!1}},onShow:function(){this.checkstat()},onShareAppMessage:function(){return{title:"最新最好笑的趣事趣图，来看下吧",path:"/pages/hot/hot"}},onLoad:function(){this.checkstat(),this.getData()},onReachBottom:function(){this.getData()},onPullDownRefresh:function(){this.refreshing=!0,this.getData()},methods:{checkstat:function(){var t=n.default.checklogin();this.openid=t.openid,this.userinfo=t.userinfo,this.token=t.token},previmg:function(e){t.previewImage({urls:[e]})},showreply:function(e,i){t.setStorage({key:"detail-"+e,data:(0,n.parSetData)(this.list[i])}),t.navigateTo({url:"../detail/detail?id="+e})},getData:function(){var e=this;this.loading=!0,t.request({url:n.default.apiurl+"syj/index/getlist",method:"POST",dataType:"json",data:{page:this.refreshing?1:this.fetchPageNum,pagesize:20,status:1,order:"like",token:this.token,shebei:n.default.shebei},success:function(i){if(200!==i.statusCode)t.showToast({title:"请求数据失败请重试"+i.statusCode,duration:2e3,icon:"none"});else{if(i.data.data.length<1)return t.showToast({title:"没有了",icon:"none"}),!1;if(e.refreshing&&i.data.data[0].id===e.list[0].id)return t.showToast({title:"已经最新",icon:"none"}),e.refreshing=!1,void t.stopPullDownRefresh();e.refreshing?(e.refreshing=!1,t.stopPullDownRefresh(),e.list=i.data.data,e.fetchPageNum=2):(e.list=e.list.concat(i.data.data),e.fetchPageNum+=1)}},fail:function(e){t.showToast({title:"请求数据失败请重试",duration:2e3,icon:"none"})},complete:function(){this.loading=!1},header:{auth:n.default.httpauth}})},setlike:function(t,e,i){n.default.setlike(this,this.list[e],t,i)},login:function(t){n.default.logincomm(t,this)}}};e.default=a}).call(this,i("649d")["default"])},f588:function(t,e,i){"use strict";i.r(e);var n=i("b570"),o=i("8cb5");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("0832");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports}},[["94b5","common/runtime","common/vendor"]]]);